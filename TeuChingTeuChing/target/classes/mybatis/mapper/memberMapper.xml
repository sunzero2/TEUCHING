<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Member">


	<!-- 일반멤버 회원가입 -->
	<insert id="joinMember">
		insert into TR_MEMBER(MEM_EMAIL, PASSWORD, NICKNAME, GENDER, CELL,
							ADDRESS, IS_LEAVE_YN, MANAGER_YN)
		VALUES(#{email}, #{password}, #{nickname}, #{gender}
				, #{cell}, #{address}, 'N', 'N')
	</insert>
	
	<!-- 트레이너 회원가입 -->
	<insert id="joinTrainer">
		insert into TR_TRAINER VALUES(#{email}, #{password}, #{name}, #{gender}, #{weight}, #{height}
				, #{cell}, #{career}, #{address}, #{address_detail}, #{prefer1}, #{prefer2}, #{prefer3}, #{photo}, 0, 'N', 'N')
	</insert>
	
	<!-- 일반회원 닉네임 중복 체크 -->
	<select id="nickChk" resultType="int">
		select count(*) from tr_member where NICKNAME = #{nickname}
	</select>
	
	<!--회원 이메일 중복 체크 Mapper -->
	<select id="emailChk" resultType="int">
		select count(*) from ${table} where
		<if test='table=="tr_trainer"'>
			tr_email = #{email}
		</if>
		<if test='table=="tr_member"'>
			mem_email = #{email}
		</if>
	</select>
	
	<!-- 일반회원 로그인 -->
	<select id="m_login" resultType="Member">
		select mem_email, nickname, gender, cell, address
		from tr_member where mem_email = #{email} and password = #{password}
	</select>
	 	
 	<!-- 트레이너 로그인 -->
	<select id="t_login" resultMap="trainerResult">
		select tr_email, trainer_name, gender, weight, height, cell, career, address,
		address_detail, prefer_add1, prefer_add2, prefer_add3, photo, tr_like
		from tr_trainer where tr_email = #{email} and password = #{password}
	</select>
 	
 	<resultMap id="trainerResult" type="Trainer">
 		<result column ="trainer_name" property="trainerName"/>
 	</resultMap>
 	
 	<!-- 비밀번호 변경 -->
	<update id="update_pw" parameterType="member">
		update member set pw = #{pw} where id = #{id}
	</update>
 	
 	
 	
 	
 	
 	
 	
 	
 	<!-- 패스워드 찾기 -->
 	
 	<!-- 패스워드 변경하기 -->
 	
 	<!-- 회원탈퇴 -->
 	
 	
 	
 	
 	
 	
 	
 	
	
</mapper>
