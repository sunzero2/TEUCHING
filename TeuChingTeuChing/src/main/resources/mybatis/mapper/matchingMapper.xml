<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Matching">
	<select id="searchWord" resultType="Post">
		select * from tr_post where 
		<if test='option.equals("trainer")'>
			writer like '%' || #{input} || '%'
		</if>
		<if test='option.equals("post")'>
			post_title like '%' || #{input} || '%'
		</if>
	</select>
	
	<resultMap id="postMap" type="Post">
		<id column="post_idx" property="postIdx"></id>
		<result column="tr_email" property="trEmail"></result>
		<result column="post_title" property="postTitle"></result>
		<result column="post_cont" property="postCont"></result>
		<result column="purpose" property="purpose"></result>
		<result column="sports" property="sports"></result>
		<result column="area" property="area"></result>
		<result column="class_size" property="classSize"></result>
		<result column="gender" property="gender"></result>
		<result column="place" property="place"></result>
		<result column="price" property="price"></result>
		<result column="write_date" property="writeDate"></result>
	</resultMap>
	
	<select id="keyword" resultMap="postMap">
		select * from tr_post
		<where>
			<if test='!purpose.equals("null")'>
				purpose = #{purpose}
			</if>
			<if test='!sports.equals("null")'>
				and sports = #{sports}
			</if>
			<if test='!area.equals("null")'>
				and area = #{area}
			</if>
			<if test='!classSize.equals("null")'>
				and classSize = #{classSize}
			</if>
			<if test='!gender.equals("null")'>
				and gender = #{gender}
			</if>
			<if test='!place.equals("null")'>
				and place = #{place}
			</if>
		</where>
	</select>
	
	<select id="postDetail" resultMap="postMap">
		select * from tr_post where post_idx=#{postIdx}
	</select>
</mapper>